<% layout('layouts/boilerplate') %>
	<%- include('../partials/flash') %> <!-- relative path -->

	<div id="map" class="mb-3 cluster-map"></div>
	<h1>All Campgrounds</h1>
	<div>
		<a href="/campgrounds/new">Create New</a>
	</div>
	<% for (var campground of campgrounds) { -%>
		<div class="card mb-3" style="max-height:350px;">
			<div class="row">
				<div class="col-md-4">
				  <img src="<%= campground.images.length > 0 ? campground.images[0].path: '' %>" class="card-img-top image-fluid" alt="...">
				</div>	
			  <div class="card-body col-md-8">
			  	<h4 class="card-title"><%= campground.title %></h4>
			    <blockquote class="blockquote mb-0">
			      <p><%= campground.description %></p>
			      <footer class="blockquote-footer"><%= campground.location %></footer>
			    </blockquote>
			    <a href="/campgrounds/<%= campground._id %>" class="btn btn-primary">View "<%= campground.title %>"</a>
			  </div>
			</div>	
		</div>
	<% } -%>
<script>
	const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
	const campgrounds = {features: <%- JSON.stringify(campgrounds) %>};
</script>
<script src="/javascripts/clusterMap.js"></script>
	<!-- <ul>
	<% for (var campground of campgrounds) { -%>
		<li><a href="/campgrounds/<%= campground._id %>"><%= campground.title %></a></li>
	<% } -%>
	</ul> -->